<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Contact Manager</title>

  <!-- Styles and JS -->
  <link rel="stylesheet" href="dashboard.css" />
  <script src="code.js" defer></script>
</head>

<!-- Back to index.html if no cookie -->
<body onload="readSession()">
<section>
  <h1 id="welcomeMessage">Welcome!</h1>
  <script>
    window.addEventListener("DOMContentLoaded", () => {
      const welcomeEl = document.getElementById("welcomeMessage");
      const firstName = sessionStorage.getItem('firstName') || '';
      if (welcomeEl) welcomeEl.textContent = `Welcome, ${firstName}!`;
    });
  </script>
  <!-- soft background -->
  <div class="soft-background">
    <div class="floating-shapes">
      <div class="soft-blob blob-1"></div>
      <div class="soft-blob blob-2"></div>
      <div class="soft-blob blob-3"></div>
      <div class="soft-blob blob-4"></div>
    </div>
  </div>

  <!-- User header -->
  <div class="user-header">
    <div class="gentle-logo" aria-hidden="true">
      <div class="logo-circle">
        <div class="comfort-icon">
          <svg class="smile" width="32" height="32" viewBox="0 0 32 32" fill="none"
               xmlns="http://www.w3.org/2000/svg">
            <path d="M16 2C8.3 2 2 8.3 2 16s6.3 14 14 14 14-6.3 14-14S23.7 2 16 2z"
                  fill="none" stroke="currentColor" stroke-width="1.5"/>
            <path d="M12 16a4 4 0 1 0 8 0" stroke="currentColor"
                  stroke-width="1.5" stroke-linecap="round"/>
            <circle cx="12" cy="12" r="1.5" fill="currentColor"/>
            <circle cx="20" cy="12" r="1.5" fill="currentColor"/>
          </svg>
        </div>
        <div class="gentle-glow"></div>
      </div>
    </div>
    <span class="user-name" id="fullName"></span>
    <script>
      window.addEventListener("DOMContentLoaded", () => {
        const welcomeEl1 = document.getElementById("fullName");
        const firstName1 = sessionStorage.getItem('firstName') || '';
        const lastName1 = sessionStorage.getItem('lastName') || '';
        if (welcomeEl1) welcomeEl1.textContent = `${firstName1} ${lastName1}`;
      });
    </script>
  </div>

  <!-- Search (IDs match searchContacts in code.js) -->
  <input class="search-bar" type="text" id="search" placeholder="Search Contact" oninput="searchContacts()">
  <div id="contactSearchResult" aria-live="polite"></div>
  <p id="searchOutput" style="display:none"></p>

  <!-- Top-right actions -->
  <div class="top-actions">
    <a class="button logout-btn" id="logoutBtn" href="#" onclick="doLogout(); return false;">
      <img class="icon-img" src="logout.png" alt="">
      <span class="logout">LOGOUT</span>
    </a>
  </div>

  <!-- Table header -->
  <div class="tbl-header">
    <table cellpadding="0" cellspacing="0" border="0">
      <thead>
        <tr>
          <th>First</th>
          <th>Last</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Action</th>
        </tr>
      </thead>
    </table>
  </div>

  <!-- Table body (tbody id used for future JS updates) -->
  <div class="tbl-content">
    <table cellpadding="0" cellspacing="0" border="0">
      <tbody id="contactsBody">
        <tr data-id="demo-1">
          <td>Cristiano</td>
          <td>Ronaldo</td>
          <td>example@gmail.com</td>
          <td>123-456-789</td>
          <td>
            <div class="action-buttons">
              <button class="edit">
                <!-- pencil icon -->
                <svg aria-hidden="true" viewBox="0 0 24 24" focusable="false">
                  <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"/>
                  <path d="M21.41 6.34a1.25 1.25 0 0 0 0-1.77l-1.98-1.98a1.25 1.25 0 0 0-1.77 0L15.83 4.42l3.75 3.75 1.83-1.83z"/>
                </svg>
                <span>Edit</span>
              </button>
              <button class="delete">
                <!-- trash icon -->
                <svg aria-hidden="true" viewBox="0 0 24 24" focusable="false">
                  <path d="M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                </svg>
                <span>Delete</span>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Add contact FAB (wired by initAddContactModal in code.js) -->
  <button class="fab-add" id="openAdd" aria-label="Add contact" title="Add contact">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <path d="M11 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4Z" fill="currentColor"/>
      <path d="M3 20a6 6 0 0 1 12 0" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <path d="M19 7v6M16 10h6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>
  </button>

  <!-- Modal (ids/classes match addContact + modal wiring in code.js) -->
  <div class="modal is-hidden" id="addContactModal" role="dialog" aria-modal="true" aria-labelledby="addTitle">
    <div class="modal__backdrop" data-close></div>

    <div class="modal__dialog" role="document">
      <button class="modal__close" type="button" data-close aria-label="Close">Ã—</button>
      <h3 id="addTitle">Add Contact</h3>

      <form id="addContactForm">
        <input type="hidden" id="contactId" name="contactId" />
        <div class="form-row">
          <label>First name
            <input id="firstNameText" required />
          </label>
          <label>Last name
            <input id="lastNameText" required />
          </label>
        </div>

        <label>Email
          <input type="email" id="emailText" placeholder="example@gmail.com" required />
        </label>

        <label>Phone
          <input type="tel" id="phoneText" placeholder="123-456-789" required />
        </label>

        <div class="modal__actions">
          <button type="button" class="btn btn-outline" data-close>Cancel</button>
          <button type="submit" class="btn btn-primary" id="saveContactBtn">Save</button>
        </div>

        <!-- status line used by addContact() -->
        <div id="contactAddResult" aria-live="polite"></div>
      </form>
    </div>
  </div>

</section>
</body>
</html>
